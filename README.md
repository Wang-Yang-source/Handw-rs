# æ‰‹å†™å­—æ¯è¯†åˆ«ç³»ç»Ÿ âœï¸

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨Rustè¯­è¨€å®ç°çš„æ‰‹å†™å­—æ¯è¯†åˆ«ç³»ç»Ÿï¼Œä½¿ç”¨è‡ªå®šä¹‰Kå‡å€¼èšç±»(KMeans)ç®—æ³•è¿›è¡Œå­—æ¯åˆ†ç±»ã€‚

## åŠŸèƒ½ âœ¨

- è®­ç»ƒæ‰‹å†™å­—æ¯è¯†åˆ«æ¨¡å‹
- è¯†åˆ«å•ä¸ªæ‰‹å†™å­—æ¯å›¾åƒ
- æ”¯æŒA-Zçš„26ä¸ªè‹±æ–‡å­—æ¯
- æ”¯æŒä»CSVæ–‡ä»¶åŠ è½½è®­ç»ƒæ•°æ®

## å®‰è£… ğŸ”§

ç¡®ä¿æ‚¨å·²å®‰è£…Rustå’ŒCargoã€‚ç„¶åå…‹éš†æ­¤ä»“åº“å¹¶æ„å»ºé¡¹ç›®ï¼š

```bash
git clone https://github.com/yourusername/handwritten_recognition.git
cd handwritten_recognition
cargo build --release
```

## æ•°æ®é›†å‡†å¤‡ ğŸ“Š

### ä½¿ç”¨CSVæ•°æ®é›†

æœ¬é¡¹ç›®é»˜è®¤ä½¿ç”¨Kaggleçš„"A_Z Handwritten
Data.csv"æ•°æ®é›†ã€‚è¯¥æ•°æ®é›†åŒ…å«æ‰‹å†™å­—æ¯A-Zçš„æ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬ç”±28x28åƒç´ çš„å›¾åƒè¡¨ç¤ºï¼Œå­˜å‚¨åœ¨CSVæ–‡ä»¶ä¸­ã€‚

CSVæ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š

- ç¬¬ä¸€åˆ—ï¼šæ ‡ç­¾ï¼ˆ0-25å¯¹åº”A-Zï¼‰
- å…¶ä½™åˆ—ï¼š784ä¸ªåƒç´ å€¼ï¼ˆ28x28å›¾åƒçš„åƒç´ å€¼ï¼‰

### ä½¿ç”¨å›¾åƒç›®å½• ğŸ–¼ï¸

æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨æŒ‰ä»¥ä¸‹ç»“æ„ç»„ç»‡çš„å›¾åƒç›®å½•ï¼š

```
data/
  train/
    A/
      image1.png
      image2.png
      ...
    B/
      image1.png
      image2.png
      ...
    ...
    Z/
      ...
```

æ¯ä¸ªå­—æ¯ç›®å½•ä¸‹åº”åŒ…å«è¯¥å­—æ¯çš„å¤šä¸ªæ‰‹å†™æ ·æœ¬å›¾åƒã€‚

## ä½¿ç”¨æ–¹æ³• ğŸš€

### è®­ç»ƒæ¨¡å‹ ğŸ§ 

ä»CSVæ–‡ä»¶è®­ç»ƒï¼š

```bash
cargo run -- --train --use-csv
```

ä»å›¾åƒç›®å½•è®­ç»ƒï¼š

```bash
cargo run -- --train
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œè®­ç»ƒæ•°æ®å°†ä»`data/A_Z Handwritten Data.csv`ï¼ˆCSVæ¨¡å¼ï¼‰æˆ–`data/train`ï¼ˆå›¾åƒç›®å½•æ¨¡å¼ï¼‰åŠ è½½ï¼Œæ¨¡å‹å°†ä¿å­˜åˆ°`model.json`ã€‚

æ‚¨å¯ä»¥æŒ‡å®šè‡ªå®šä¹‰è·¯å¾„ï¼š

```bash
cargo run -- --train --use-csv --train-path /path/to/data.csv --model-path /path/to/save/model.json
```

æˆ–ä½¿ç”¨çŸ­é€‰é¡¹ï¼š

```bash
cargo run -- -t -u -p /path/to/data.csv -m /path/to/save/model.json
```

### è¯†åˆ«å›¾åƒ ğŸ”

```bash
cargo run -- --test-image /path/to/image.png
```

æˆ–ä½¿ç”¨çŸ­é€‰é¡¹ï¼š

```bash
cargo run -- -i /path/to/image.png
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†ä»`model.json`åŠ è½½æ¨¡å‹ã€‚æ‚¨å¯ä»¥æŒ‡å®šè‡ªå®šä¹‰æ¨¡å‹è·¯å¾„ï¼š

```bash
cargo run -- --test-image /path/to/image.png --model-path /path/to/model.json
```

æˆ–ä½¿ç”¨çŸ­é€‰é¡¹ï¼š

```bash
cargo run -- -i /path/to/image.png -m /path/to/model.json
```

## å‘½ä»¤è¡Œå‚æ•°è¯´æ˜ ğŸ’»

| é•¿é€‰é¡¹       | çŸ­é€‰é¡¹ | æè¿°              |
| ------------ | ------ | ----------------- |
| --train      | -t     | è®­ç»ƒæ¨¡å‹          |
| --train-path | -p     | è®­ç»ƒæ•°æ®é›†è·¯å¾„    |
| --test-image | -i     | æµ‹è¯•å›¾åƒè·¯å¾„      |
| --model-path | -m     | æ¨¡å‹ä¿å­˜/åŠ è½½è·¯å¾„ |
| --use-csv    | -u     | ä½¿ç”¨CSVæ•°æ®é›†     |

## ç¤ºä¾‹ ğŸ“

1. ä»CSVè®­ç»ƒæ¨¡å‹ï¼š
   ```bash
   cargo run -- --train --use-csv
   ```
   æˆ–
   ```bash
   cargo run -- -t -u
   ```

2. è¯†åˆ«å›¾åƒï¼š
   ```bash
   cargo run -- --test-image test_image.png
   ```
   æˆ–
   ```bash
   cargo run -- -i test_image.png
   ```

## ç®—æ³•è¯´æ˜ ğŸ§®

æœ¬é¡¹ç›®ä½¿ç”¨è‡ªå®šä¹‰å®ç°çš„Kå‡å€¼èšç±»(KMeans)ç®—æ³•è¿›è¡Œå­—æ¯è¯†åˆ«ã€‚ç®—æ³•æµç¨‹å¦‚ä¸‹ï¼š

1. å°†æ¯ä¸ªæ‰‹å†™å­—æ¯å›¾åƒè½¬æ¢ä¸ºç‰¹å¾å‘é‡ï¼ˆ28x28=784ç»´ï¼‰
2. ä½¿ç”¨KMeansç®—æ³•å°†ç‰¹å¾å‘é‡èšç±»ä¸º26ä¸ªç°‡ï¼ˆå¯¹åº”26ä¸ªå­—æ¯ï¼‰ï¼š
   - éšæœºåˆå§‹åŒ–26ä¸ªèšç±»ä¸­å¿ƒ
   - å°†æ¯ä¸ªæ ·æœ¬åˆ†é…åˆ°æœ€è¿‘çš„èšç±»ä¸­å¿ƒ
   - é‡æ–°è®¡ç®—æ¯ä¸ªèšç±»çš„ä¸­å¿ƒç‚¹
   - é‡å¤ä¸Šè¿°æ­¥éª¤ç›´åˆ°æ”¶æ•›æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°
3. ä¸ºæ¯ä¸ªç°‡åˆ†é…æœ€å¸¸è§çš„å­—æ¯æ ‡ç­¾ï¼ˆé€šè¿‡ç»Ÿè®¡æ¯ä¸ªç°‡ä¸­æ ·æœ¬çš„çœŸå®æ ‡ç­¾ï¼‰
4. è¯†åˆ«æ—¶ï¼Œå°†æµ‹è¯•å›¾åƒè½¬æ¢ä¸ºç‰¹å¾å‘é‡ï¼Œæ‰¾åˆ°æœ€è¿‘çš„ç°‡ï¼Œè¿”å›è¯¥ç°‡å¯¹åº”çš„å­—æ¯

## ä¾èµ–é¡¹ ğŸ“¦

- image: å›¾åƒå¤„ç†
- ndarray: å¤šç»´æ•°ç»„æ“ä½œï¼ˆå¸¦serdeæ”¯æŒï¼Œç”¨äºæ¨¡å‹åºåˆ—åŒ–ï¼‰
- rand: éšæœºæ•°ç”Ÿæˆï¼ˆç”¨äºKMeansåˆå§‹åŒ–ï¼‰
- csv: CSVæ–‡ä»¶å¤„ç†
- clap: å‘½ä»¤è¡Œå‚æ•°è§£æ
- serde_json: æ¨¡å‹åºåˆ—åŒ–å’Œååºåˆ—åŒ–
- anyhow: é”™è¯¯å¤„ç†
